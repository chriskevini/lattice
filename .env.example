# ============================================================================
# DISCORD CONFIGURATION
# ============================================================================
DISCORD_TOKEN=your_bot_token_here

# Main Channel: Primary user interaction, conversation, proactive check-ins
DISCORD_MAIN_CHANNEL_ID=123456789012345678

# Dream Channel: Meta activities, prompt optimization proposals, self-reflection
# Human approvals for prompt_registry updates happen here
DISCORD_DREAM_CHANNEL_ID=987654321098765432

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
DATABASE_URL=postgresql://user:password@localhost:5432/lattice

# Connection pooling (optimized for 1vCPU)
DB_POOL_MIN_SIZE=2
DB_POOL_MAX_SIZE=5

# ============================================================================
# AI/ML CONFIGURATION
# ============================================================================
# Lightweight model for 2GB RAM constraint (~80MB)
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBEDDING_DIMENSION=384
EMBEDDING_CACHE_DIR=./models

# ============================================================================
# MEMORY CONFIGURATION - Hardware Constraints (2GB RAM / 1vCPU)
# ============================================================================
# These are HARD LIMITS enforced by the system to prevent OOM crashes.
# The AI can request values within these ranges. Requests outside ranges
# will be clamped and reported back to the AI in the next context.

# Episodic Memory: How many recent conversation turns to include
MIN_EPISODIC_CONTEXT_TURNS=3
MAX_EPISODIC_CONTEXT_TURNS=15
DEFAULT_EPISODIC_CONTEXT_TURNS=10

# Semantic Memory: How many vector search results to retrieve
MIN_VECTOR_SEARCH_LIMIT=3
MAX_VECTOR_SEARCH_LIMIT=10
DEFAULT_VECTOR_SEARCH_LIMIT=5

# Vector similarity threshold (0.0-1.0, higher = more similar)
SIMILARITY_THRESHOLD=0.7

# Embedding batch size for memory extraction
MAX_EMBEDDING_BATCH_SIZE=16

# ============================================================================
# RETRIEVAL STRATEGIES
# ============================================================================
# AI can request strategies; system translates to specific limits within ranges
# - minimal: Fast, low memory (3 turns, 3 vectors)
# - balanced: Moderate speed/memory (10 turns, 5 vectors) [DEFAULT]
# - comprehensive: Slower, more context (15 turns, 10 vectors)
DEFAULT_RETRIEVAL_STRATEGY=balanced

# ============================================================================
# PROACTIVE BEHAVIOR
# ============================================================================
# Proactive Interval: AI decides via NEXT_PROACTIVE_IN_MINUTES output
# This is a FAILSAFE if AI never sets next check-in time
DEFAULT_PROACTIVE_INTERVAL_MINUTES=120
MIN_PROACTIVE_INTERVAL_MINUTES=30
MAX_PROACTIVE_INTERVAL_MINUTES=1440  # 24 hours

# Dreaming Cycle: Self-analysis and prompt optimization proposals
# Posts to DISCORD_DREAM_CHANNEL_ID for human approval
DREAMING_CYCLE_CRON=0 3 * * *  # 3:00 AM daily

# ============================================================================
# EXECUTION TRANSPARENCY
# ============================================================================
# Report when AI requests are clamped/modified by system constraints
REPORT_CONSTRAINT_VIOLATIONS=true

# Include system execution report in next context window
INCLUDE_EXECUTION_REPORT=true

# ============================================================================
# LOGGING
# ============================================================================
LOG_LEVEL=INFO
STRUCTURED_LOGS=true
LOG_FILE=logs/lattice.log

# ============================================================================
# PERFORMANCE
# ============================================================================
MAX_WORKERS=2
REQUEST_TIMEOUT_SECONDS=30

# Memory budget for query operations (in MB, out of 2048 total)
MEMORY_BUDGET_MB=1500
