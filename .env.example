# ============================================================================
# DISCORD CONFIGURATION
# ============================================================================
DISCORD_TOKEN=your_bot_token_here

# Main Channel: Primary user interaction, conversation, proactive check-ins
DISCORD_MAIN_CHANNEL_ID=123456789012345678

# Dream Channel: Meta activities, prompt optimization proposals, self-reflection
# Human approvals for prompt_registry updates happen here
DISCORD_DREAM_CHANNEL_ID=987654321098765432

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
DATABASE_URL=postgresql://user:password@localhost:5432/lattice

# Connection pooling (optimized for 1vCPU)
DB_POOL_MIN_SIZE=2
DB_POOL_MAX_SIZE=5

# ============================================================================
# AI/ML CONFIGURATION
# ============================================================================
# Lightweight model for 2GB RAM constraint (~80MB)
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBEDDING_DIMENSION=384
EMBEDDING_CACHE_DIR=./models

# ============================================================================
# MEMORY CONFIGURATION - Hardware Constraints (2GB RAM / 1vCPU)
# ============================================================================
# PHILOSOPHY: AI's goal is to generate the best response. System's goal is to
# enforce hardware constraints. AI should request whatever context it believes
# will produce the best response, and system transparently clamps if needed.
#
# These are HARD LIMITS enforced by the system to prevent OOM crashes.
# AI receives these ranges in the prompt and can request specific values.
# Requests outside ranges are clamped with detailed execution reports.

# Episodic Memory: Recent conversation turns (sequential context)
# Usage: Deep dives, debugging conversations, following long threads
MIN_EPISODIC_CONTEXT_TURNS=1
MAX_EPISODIC_CONTEXT_TURNS=20
DEFAULT_EPISODIC_CONTEXT_TURNS=10

# Semantic Memory: Vector search results (related facts/knowledge)
# Usage: Broad topic exploration, preference recall, cross-domain connections
MIN_VECTOR_SEARCH_LIMIT=0
MAX_VECTOR_SEARCH_LIMIT=15
DEFAULT_VECTOR_SEARCH_LIMIT=5

# Vector similarity threshold (0.0-1.0, higher = more similar)
# AI can request specific threshold to broaden/narrow semantic search
MIN_SIMILARITY_THRESHOLD=0.5
MAX_SIMILARITY_THRESHOLD=0.9
DEFAULT_SIMILARITY_THRESHOLD=0.7

# Semantic Triple Traversal: Graph relationship hops
# Usage: Exploring multi-step relationships (e.g., "User likes X, X relates to Y")
MIN_TRIPLE_DEPTH=0
MAX_TRIPLE_DEPTH=3
DEFAULT_TRIPLE_DEPTH=1

# Embedding batch size for memory extraction (background process)
MAX_EMBEDDING_BATCH_SIZE=16

# ============================================================================
# PROACTIVE BEHAVIOR
# ============================================================================
# Proactive Interval: AI decides via NEXT_PROACTIVE_IN_MINUTES output
# This is a FAILSAFE if AI never sets next check-in time
DEFAULT_PROACTIVE_INTERVAL_MINUTES=120
MIN_PROACTIVE_INTERVAL_MINUTES=30
MAX_PROACTIVE_INTERVAL_MINUTES=1440  # 24 hours

# Dreaming Cycle: Self-analysis and prompt optimization proposals
# Posts to DISCORD_DREAM_CHANNEL_ID for human approval
DREAMING_CYCLE_CRON=0 3 * * *  # 3:00 AM daily

# ============================================================================
# EXECUTION TRANSPARENCY
# ============================================================================
# Report when AI requests are clamped/modified by system constraints
REPORT_CONSTRAINT_VIOLATIONS=true

# Include system execution report in next context window
INCLUDE_EXECUTION_REPORT=true

# ============================================================================
# LOGGING
# ============================================================================
LOG_LEVEL=INFO
STRUCTURED_LOGS=true
LOG_FILE=logs/lattice.log

# ============================================================================
# PERFORMANCE
# ============================================================================
MAX_WORKERS=2
REQUEST_TIMEOUT_SECONDS=30

# Memory budget for query operations (in MB, out of 2048 total)
MEMORY_BUDGET_MB=1500
